accelerator:
  displayName: onemagnify-web-starter-app
  description: OneMagnify Web Starter App
  iconUrl: data:image/jpeg;base64,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
  tags:
  - java
  - spring
  - cloud
  - function
  - serverless
  - tanzu

  # options for the UI
  options:
  - name: deploymentType
    inputType: select
    choices:
    - value: workload
      text: TAP workload
    - value: k8s-simple
      text: Kubernetes deployment and service
    - value: none
      text: Skip Kubernetes deployment
    defaultValue: workload
    required: true
  - name: sourceRepositoryPrefix
    inputType: text
    label: The source repository prefix to use when pushing the source
    description: The prefix for the repository where source can be stored during development
    defaultValue: dev.local
    dependsOn:
      name: deploymentType
      value: workload

engine:
  merge:
    - include: [ "**" ]
      exclude: [ "pom.xml", "README.md", "kubernetes/**", "catalog/*.yaml" ]
    - include: [ "pom.xml" ]
      chain:
      - type: ReplaceText
        substitutions:
        - text: hello-fun
          with: "#artifactId"
    - include: [ "kubernetes/k8s/deployment.yaml", "kubernetes/k8s/service.yaml" ]
      condition: "#deploymentType == 'k8s-simple'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: hello-fun
          with: "#artifactId"
      - type: RewritePath
        rewriteTo: "'kubernetes/' + #filename"
    - include: [ "kubernetes/k8s/Tiltfile" ]
      condition: "#deploymentType == 'k8s-simple'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: hello-fun
          with: "#artifactId"
      - type: RewritePath
        rewriteTo: "#filename"
    - include: [ "kubernetes/tap/workload.yaml" ]
      condition: "#deploymentType == 'workload'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: ": hello-fun"
          with: "': ' + #artifactId"
      - type: RewritePath
        rewriteTo: "'config/' + #filename"
    - include: [ "kubernetes/tap/Tiltfile" ]
      condition: "#deploymentType == 'workload'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: hello-fun
          with: "#artifactId"
      - type: ReplaceText
        substitutions:
          - text: dev.local
            with: "#sourceRepositoryPrefix"
      - type: RewritePath
        rewriteTo: "#filename"
    - include: [ "catalog/*.yaml" ]
      condition: "#deploymentType != 'none'"
      chain:
      - type: ReplaceText
        substitutions:
        - text: hello-fun
          with: "#artifactId"
    - name: README
      type: Combo
      onConflict: Append
      sources:
      - include: [ "README.md"]
        chain:
        - type: ReplaceText
          substitutions:
          - text: hello-fun template repo
            with: "#artifactId"
      - include: [ "kubernetes/k8s/DEPLOYING.md" ]
        condition: "#deploymentType == 'k8s-simple'"
        chain:
        - type: RewritePath
          rewriteTo: "'README.md'"
      - include: [ "kubernetes/tap/DEPLOYING.md" ]
        condition: "#deploymentType == 'workload'"
        chain:
        - type: ReplaceText
          substitutions:
          - text: hello-fun
            with: "#artifactId"
        - type: RewritePath
          rewriteTo: "'README.md'"
